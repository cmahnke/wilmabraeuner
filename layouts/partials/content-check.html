{{- if not .Params.check -}}
  {{- if ne .Params.check false -}}
    {{- if eq (.OutputFormats.Get "qrcode") nil -}}
      {{- errorf "%s hasn't got QR Code output" .File.Path -}}
    {{- end -}}
    {{- if not .Params.type -}}
      {{- errorf "%s hasn't have 'type' set" .File.Path -}}
    {{- end -}}

    {{- if eq .Params.type "audio" -}}
      {{- $audio := .Resources.Match "audio" -}}
      {{- if eq $audio nil -}}
        {{- errorf "Audio for %s not found" .File.Path -}}
      {{- else if not .Aliases -}}
        {{- errorf "No alias for audio type, file %s" .File.Path -}}
      {{- end -}}
      {{- if ne (substr (index .Aliases 0) -2 1) "a" -}}
        {{- errorf "Alias for audio type doesn't ends with 'a', file %s" .File.Path -}}
      {{- end -}}
      {{- if not .Title -}}
        {{- errorf "%s has no title" .File.Path -}}
      {{- end -}}
    {{- else if eq .Params.type "text" -}}
      {{- if not .Content -}}
        {{- errorf "%s is empty!" .File.Path -}}
      {{- end -}}
      {{- if not .Aliases -}}
        {{- errorf "%s has no alias!" .File.Path -}}
      {{- end -}}
      {{- if ne (substr (index .Aliases 0) -2 1) "t" -}}
        {{- errorf "Alias for audio type doesn't ends with 'a', file %s" .File.Path -}}
      {{- end -}}
      {{- if not .Title -}}
        {{- errorf "%s has no title" .File.Path -}}
      {{- end -}}
    {{- else if eq .Params.type "wall" -}}
      {{- $preview := .Resources.Match "preview" -}}
      {{- if eq $preview nil -}}
        {{- errorf "Preview image for %s not found" .File.Path -}}
      {{- end -}}
      {{- if not .Aliases -}}
        {{- errorf "%s has no alias!" .File.Path -}}
      {{- end -}}
      {{- if ne .Kind "section" -}}
        {{- errorf "%s is type 'wall' but not a section" .File.Path -}}
      {{- end -}}
      {{- if not .Title -}}
        {{- errorf "%s has no title" .File.Path -}}
      {{- end -}}
    {{- else if eq .Params.type "frame" -}}
      {{- $preview := .Resources.Match "preview" -}}
      {{- if eq $preview nil -}}
        {{- errorf "Preview image for %s not found" .File.Path -}}
      {{- end -}}
      {{- if not .Aliases -}}
        {{- errorf "%s has no alias!" .File.Path -}}
      {{- end -}}
      {{- if ne .Kind "section" -}}
        {{- errorf "%s is type 'frame' but not a section" .File.Path -}}
      {{- end -}}
    {{- end -}}

    {{- if not .Title -}}
      {{- warnf "%s has no title" .File.Path -}}
    {{- end -}}
    {{- if ne .Params.type "topic" -}}
      {{- if not .Aliases -}}
        {{- warnf "%s has no alias" .File.Path -}}
      {{- else -}}
        {{- if ne .File nil -}}
          {{- $contextFile :=  .File.Path -}}
          {{- range .Aliases -}}
            {{- if not (hasPrefix . "/") -}}
              {{- errorf "%s in %s is missing a leading slash" . $contextFile -}}
            {{- end -}}
            {{- if not (strings.HasSuffix . "/") -}}
              {{- errorf "%s in %s is missing a trailing slash" . $contextFile -}}
            {{- end -}}
          {{- end -}}
        {{- end -}}
      {{- end -}}
    {{- else -}}
      {{- warnf "Ignoring aliases for %s" .File.Path -}}
    {{- end -}}
    {{- if .Params.draft -}}
      {{- warnf "%s is a draft!" .File.Path -}}
    {{- end -}}
  {{- end -}}
{{- else -}}
  {{- warnf "Check for %s is disabled!" .File.Path -}}
{{- end -}}
